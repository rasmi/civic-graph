<i title='Edit' ng-click='cancelEdit()' ng-hide="updating" class='glyphicon glyphicon-remove edit-marker'></i>

<div ng-if='!updating'>
<center><h3>Add Information for {{editEntity.name}}</h3></center>
<form class='edit-form' novalidate>
  <div>Company Name:
    <input type='text' class='form-control' ng-model='editEntity.name' placeholder='Name'>
    Nickname:
    <input type='text' class='form-control' ng-model='editEntity.nickname' placeholder='Nickname'>
    <br>
  </div>
    <div>Locations:
        <input type='text' class='form-control' ng-repeat='location in editEntity.locations' ng-model='location.full_address' typeahead='loc.address.formattedAddress for loc in addressSearch($viewValue)' typeahead-on-select='setLocation(location, $item)' typeahead-editable='false' ng-change='addLocation(editEntity.locations)' placeholder='Location'><br>
    </div>
    Circle of Influence:
    <div ng-repeat='influenceType in influenceTypes'>
      <label class='checkbox a-radio' ng-class="{'unchecked': $parent.$parent.influenceType != influenceType}" ng-model='$parent.$parent.influenceType' btn-radio='influenceType' ng-change='changeinfluenceType()'></label >
      <span class='caption'>{{influenceType}}</span>
    </div><br>

    What type of entity?
    <br>
    <div ng-repeat='(type, enabled) in entityTypes'>
      <label class="checkbox {{type+'-checkbox'}}" ng-class="{'unchecked': $parent.$parent.type != type}" ng-model='$parent.$parent.type' btn-radio='type' ng-change='changetype()'></label>
      <span class='caption'>{{type}}</span>
    </div><br>

    What kind of work do they do?
    <br>
    <div ng-repeat='category in editCategories'>
    <label class='checkbox a-radio' ng-class="{'unchecked': $parent.$parent.category != category}" ng-model='$parent.$parent.category' btn-radio='category' ng-change='changecategory()'></label>
    <span class='caption'>{{category.name}}</label></div><br>



    <input type='url' class='form-control' ng-model='editEntity.url' placeholder='Website'>
    <input type='text' class='form-control' ng-model='editEntity.twitter_handle' placeholder='@Twitter'>
    <div>Number of Employees <input type='number' class='form-control' ng-model='editEntity.employees'></div>
    <div ng-show='isIndivual(currentEntity)'>
        <div class="input-group">
          <div>Key Civic People?
            <input type='text'class='form-control' ng-repeat='person in editEntity.key_people' ng-model='person.name' placeholder='Name' ng-change='addKeyPerson()'>
          </div>
        </div>
    </div>


    <div>Collaboration
        <div ng-repeat='collaboration in editEntity.collaborations'>
        <input type='text' class='form-control' ng-model='collaboration.entity' typeahead='entity.name as entity.name for entity in entities | filter:{name: $viewValue} | limitTo:8' typeahead-on-select='setConnection($item, collaboration)' ng-change='addConnection(editEntity.collaborations)' placeholder='Collaborator'>
        <input type='text' class='form-control' ng-model='collaboration.details' placeholder='    Collaboration details'>
        </div>
    </div>
    <div>Employment
        <input type='text' class='form-control' ng-repeat='employment in editEntity.employments' ng-model='employment.entity' typeahead='entity.name as entity.name for entity in entities | filter:{name: $viewValue} | limitTo:8' typeahead-on-select='setConnection($item, employment)' ng-change='addConnection(editEntity.employments)' placeholder='Entity'>
    </div>
    <div>Related to
        <div ng-repeat='relation in editEntity.relations'>
        <input type='text' class='form-control' ng-model='relation.entity' typeahead='entity.name as entity.name for entity in entities | filter:{name: $viewValue} | limitTo:8' typeahead-on-select='setConnection($item, relation)' ng-change='addConnection(editEntity.relations)' placeholder='Related entity'>
        <input type='text' class='form-control' ng-model='relation.details' placeholder='    Relation details'>
        </div>
    </div>
    <div>Who provides them with data?
        <div ng-repeat='data in editEntity.data_received'>
        <input type='text' class='form-control' ng-model='data.entity' typeahead='entity.name as entity.name for entity in entities | filter:{name: $viewValue} | limitTo:8' typeahead-on-select='setConnection($item, data)' ng-change='addConnection(editEntity.data_received)' placeholder='Data Resource'>
        <input type='text' class='form-control' ng-model='data.details' placeholder='    Link to data'>
        </div>
    </div>
    <div>Who do they provide with data?
        <div ng-repeat='data in editEntity.data_given'>
        <input type='text' class='form-control' ng-model='data.entity' typeahead='entity.name as entity.name for entity in entities | filter:{name: $viewValue} | limitTo:8' typeahead-on-select='setConnection($item, data)' ng-change='addConnection(editEntity.data_given)' placeholder='Data Resource'>
        <input type='text' class='form-control' ng-model='data.details' placeholder='Link to data'>
        </div>
    </div>
    <div ng-show='isIndivual(currentEntity)'>
        <div>Who funds them via grants?
            <div ng-repeat='grant in editEntity.grants_received'>
                <input type='text' ng-model='grant.entity' typeahead='entity.name as entity.name for entity in entities | filter:{name: $viewValue} | limitTo:8' typeahead-on-select='setFundingConnection($item, grant)' ng-change='addFundingConnection(editEntity.grants_received)' typeahead-editable='false' placeholder='Funder'>
                <div>
                    <div class='input-group'>
                        <span class='input-group-addon'>$</span>
                        <input type='number' class='form-control' ng-model='grant.amount' placeholder='Amount' style='display: inline-block; width: 60%;'>

                        <input type='number' class='form-control' ng-model='grant.year' placeholder='Year' style='display: inline-block; width: 40%;'>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div ng-show='isIndivual(currentEntity)'>
        <div>Who invests in them via equity stakes (stock)?
            <div ng-repeat='investment in editEntity.investments_received'>
                <input type='text' ng-model='investment.entity' typeahead='entity.name as entity.name for entity in entities | filter:{name: $viewValue} | limitTo:8' typeahead-on-select='setFundingConnection($item, investment)' ng-change='addFundingConnection(editEntity.investments_received)' typeahead-editable='false' placeholder='Investor'>
                <div>
                    <div class='input-group'>
                    <span class='input-group-addon'>$</span>
                    <input type='number' class='form-control' ng-model='investment.amount' placeholder='Amount' style='display: inline-block; width: 60%;'>
               
                    <input type='number' class='form-control' ng-model='investment.year' placeholder='Year' style='display: inline-block; width: 40%;'>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div ng-show='isIndivual(currentEntity)'>
        <div>Who do they fund via grants?
            <div ng-repeat='grant in editEntity.grants_given'>
                <input type='text' ng-model='grant.entity' typeahead='entity.name as entity.name for entity in entities | filter:{name: $viewValue} | limitTo:8' typeahead-on-select='setFundingConnection($item, grant)' ng-change='addFundingConnection(editEntity.grants_given)' typeahead-editable='false' placeholder='Fundee'>
                <div>
                    <div class='input-group'>
                    <span class='input-group-addon'>$</span>
                    <input type='number' class='form-control' ng-model='grant.amount' placeholder='Amount' style='display: inline-block; width: 60%;'>
                    
                    <input type='number' class='form-control' ng-model='grant.year' placeholder='Year' style='display: inline-block; width: 40%;'>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
    <div>Who do they invest in via equity stakes (stock)?
        <div ng-repeat='investment in editEntity.investments_made'>
            <input type='text' ng-model='investment.entity' typeahead='entity.name as entity.name for entity in entities | filter:{name: $viewValue} | limitTo:8' typeahead-on-select='setFundingConnection($item, investment)' ng-change='addFundingConnection(editEntity.investments_made)' typeahead-editable='false' placeholder='Investee'>
            <div>
                <div class='input-group'>
                <span class='input-group-addon'>$</span>
                <input type='number' class='form-control' ng-model='investment.amount' placeholder='Amount' style='display: inline-block; width: 60%;'>
               
                <input type='number' class='form-control' ng-model='investment.year' placeholder='Year' style='display: inline-block; width: 40%;'>
                </div>
            </div>
            
            
        </div>
    </div>
    <div ng-show='isIndivual(currentEntity)'>
        <div>Revenue
            <div ng-repeat='revenue in editEntity.revenues'>
                <div>
                    <div class='input-group'>
                    <span class='input-group-addon'>$</span>
                    <input type='number' class='form-control' ng-model='revenue.amount' placeholder='Amount' ng-change='addFinance(editEntity.revenues)' style='display: inline-block; width: 60%;'>
                    
                    <input type='number' class='form-control' ng-model='revenue.year' placeholder='Year' ng-change='addFinance(editEntity.revenues)' style='display: inline-block; width: 40%;'>
                    </div>
                </div>
                
                
            </div>
        </div>
    </div>
    <div ng-show='isIndivual(currentEntity)'>
        <div>Expenses
            <div ng-repeat='expense in editEntity.expenses'>
                <div>

                    <div class='input-group'>
                    <span class='input-group-addon'>$</span>
                    <input type='number' class='form-control' ng-model='expense.amount' placeholder='Amount' ng-change='addFinance(editEntity.expenses)' style='display: inline-block; width: 60%;'>
                    
                    <input type='number' class='form-control' ng-model='expense.year' placeholder='Year' ng-change='addFinance(editEntity.expenses)' style='display: inline-block; width: 40%;'>
                    </div>
                </div>
                
                
            </div>
        </div>
    </div>
</form>
</div>
<div ng-if='updating'><h2>Saving...</h2><div class="loader"></div></div>
<br>
<br>
<br>
<button ng-hide="updating" class='btn btn-default' ng-click='save()'>Save</button>
